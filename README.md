# StatFaRmer

## Overview
StatFaRmer is a tool developed to streamline the visualization of time series data generated by TraitFinder (Phenospex, Netherlands) and pinpoint outliers. The main focus is on simplifying routine analysis and conducting preliminary statistical tests on the collected data.

## Objectives
StatFaRmer aims to replicate methods from [(Schmidt et al., 2023)](https://www.sciencedirect.com/science/article/pii/S0168945223000730) using our [TraitFinder observations and genetic data](data/project_NO3) as an example for further use in similar projects.

## Ready Made Dashboard On ShinyApps
[To explore the functionality of the Shiny Dashboard, navigate to the interactive example available here](https://stathmin.shinyapps.io/StatFaRmer/).

## Features

![Shiny Interface](src/screenshot.png)

- **Initial Data Processing**: clustering timestamps using DBSCAN, filtering out outliers within clusters based on a 3-sigma threshold, transforming percentages with logit, and merging data tables for further analysis.
- **ANOVA Analysis**: ANOVA automatically includes all ANOVA factors and their interactions up to three-way. The Tukey factors feature identifies which contrasts to examine within the ANOVA.
- **dbscan_cluster**: This feature serves as a substitute for timestamp data, enabling faceting and factor selection in the analysis.
- **Data subsetting**: Given grouping factor, selected treatments, selected cultivar and selected time clusters options, it is possible to test specific hypotheses for the given selected trait.
- **Table Download**: In StatFaRmer Shiny App, all tables can be easily downloaded after applying filters and subsets (via the Download Full Results button).
- **Facet Syntax**: The facet syntax aligns with R formula principles. You can position variables from the grouping factors list on either side of ~ to create vertically or horizontally distinct subplots; using *~ 1* removes faceting.

## Installation and Use
Ensure you have R and Git installed. You can download R from [CRAN](https://cran.r-project.org/) and Git from [the official Git website](https://git-scm.com/).

To install StatFaRmer, run these commands in your terminal:
- clone the project with this line in terminal:
```bash
git clone https://github.com/Stathmin/StatFaRmer
```
- to install the project and its environment, run:
```bash
cd StatFaRmer
Rscript install.R
```
After installation:
- the initial run of main.R processes tables, creates necessary files and launches the Shiny app:
```bash
Rscript main.R
```
- you can later start the Shiny app separately with:
```bash
Rscript just_shiny.R
```

## Running Example on Windows/Linux with RStudio:
- Open "StatFaRmer.Rproj" in [RStudio](https://posit.co/download/rstudio-desktop/).
- Execute the "install.R" script by clicking the "Source" button.
- Launch the "main.R" application using RStudio's interface.
- Upon closing the StatFaRmer web page, terminate its execution in RStudio by pressing "ESC".
- Optionally, for rapid data processing repetition in the current project post-initial "main.R" run, directly run "just_shiny.R".

## Customization
Users can upload their own projects to the data folder of StatFaRmer as long as their project adheres to the following conventions (see example - **project_NO3**):
- Includes an initial archived (.zip with .csv) TraitFinder experiment
- Includes a *_handmade.csv table with mandatory **V.T.R**, **Treatment** (overrides Treatments in initial table), and **Cultivar** columns
- Includes a *_translation.csv table with mandatory **V.T.R** and **T:X:Y** columns
- Includes a groups.xlsx table with a mandatory **cultivar** column. Other columns should consist solely of Roman letters, digits, and underscores to ensure the proper functioning of "multcompView::multcompLetters4".

Any additional columns from the last three tables are preserved and accessible for analysis as factors.

The user then can modify **project** and **hours_eps** variables at **main.R, lines 16-18** according to their project name and frequency of repeated measurements/table switches.
